<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>JDBC | WASD研究院</title>
<link rel="shortcut icon" href="https://yyss1014.github.io/favicon.ico?v=1751633121752">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://yyss1014.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="JDBC | WASD研究院 - Atom Feed" href="https://yyss1014.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
JDBC

入门程序
查询数据
预编译SQL


MyBatis

入门程序
辅助配置
JDBC VS  Mybatis
数据库连接池

Hikari（追光者）
Druid（德鲁伊）


增删改操作

删除
新增
更新
查询


XML映..." />
    <meta name="keywords" content="JavaWeb" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://yyss1014.github.io">
  <img class="avatar" src="https://yyss1014.github.io/images/avatar.png?v=1751633121752" alt="">
  </a>
  <h1 class="site-title">
    WASD研究院
  </h1>
  <p class="site-description">
    温故而知新
  </p>
  <div class="menu-container">
    
      
        <a href="/archives" class="menu">
          目录
        </a>
      
    
      
        <a href="/" class="menu">
          文章
        </a>
      
    
      
        <a href="/tags" class="menu">
          分类
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              JDBC
            </h2>
            <div class="post-info">
              <span>
                2025-05-30
              </span>
              <span>
                16 min read
              </span>
              
                <a href="https://yyss1014.github.io/tag/2ON39h6GJZ/" class="post-tag">
                  # JavaWeb
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p><ul class="markdownIt-TOC">
<li><a href="#jdbc"><strong>JDBC</strong></a>
<ul>
<li><a href="#%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F"><strong>入门程序</strong></a></li>
<li><a href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><strong>查询数据</strong></a></li>
<li><a href="#%E9%A2%84%E7%BC%96%E8%AF%91sql"><strong>预编译SQL</strong></a></li>
</ul>
</li>
<li><a href="#mybatis"><strong>MyBatis</strong></a>
<ul>
<li><a href="#%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F-2"><strong>入门程序</strong></a></li>
<li><a href="#%E8%BE%85%E5%8A%A9%E9%85%8D%E7%BD%AE"><strong>辅助配置</strong></a></li>
<li><a href="#jdbc-vs-mybatis"><strong>JDBC VS  Mybatis</strong></a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><strong>数据库连接池</strong></a>
<ul>
<li><a href="#hikari%E8%BF%BD%E5%85%89%E8%80%85"><strong>Hikari（追光者）</strong></a></li>
<li><a href="#druid%E5%BE%B7%E9%B2%81%E4%BC%8A"><strong>Druid（德鲁伊）</strong></a></li>
</ul>
</li>
<li><a href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C"><strong>增删改操作</strong></a>
<ul>
<li><a href="#%E5%88%A0%E9%99%A4"><strong>删除</strong></a></li>
<li><a href="#%E6%96%B0%E5%A2%9E"><strong>新增</strong></a></li>
<li><a href="#%E6%9B%B4%E6%96%B0"><strong>更新</strong></a></li>
<li><a href="#%E6%9F%A5%E8%AF%A2"><strong>查询</strong></a></li>
</ul>
</li>
<li><a href="#xml%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE"><strong>XML映射配置</strong></a>
<ul>
<li><a href="#%E8%BE%85%E5%8A%A9%E9%85%8D%E7%BD%AE-2"><strong>辅助配置</strong></a></li>
<li><a href="#mybatisx%E7%9A%84%E4%BD%BF%E7%94%A8"><strong>MybatisX的使用</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><strong>SpringBoot配置文件</strong></a>
<ul>
<li><a href="#yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><strong>yml配置文件</strong></a></li>
<li><a href="#%E6%A1%88%E4%BE%8B"><strong>案例</strong></a></li>
</ul>
</li>
</ul>
</p>
<h1 id="jdbc"><strong>JDBC</strong></h1>
<p>JDBC：（Java DataBase Connectivity），就是使用Java语言操作关系型数据库的一套API。<br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250530155716.png" alt="" loading="lazy"></p>
<h2 id="入门程序"><strong>入门程序</strong></h2>
<p>准备数据库web01：</p>
<pre><code class="language-sql">create table user(
    id int unsigned primary key auto_increment comment 'ID,主键',
    username varchar(20) comment '用户名',
    password varchar(32) comment '密码',
    name varchar(10) comment '姓名',
    age tinyint unsigned comment '年龄'
) comment '用户表';

insert into user(id, username, password, name, age) values (1, 'daqiao', '123456', '大乔', 22),
                                                           (2, 'xiaoqiao', '123456', '小乔', 18),
                                                           (3, 'diaochan', '123456', '貂蝉', 24),
                                                           (4, 'lvbu', '123456', '吕布', 28),
                                                           (5, 'zhaoyun', '12345678', '赵云', 27);
</code></pre>
<p>在 pom.xml 文件中引入依赖：</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- MySQL JDBC driver --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.30&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;
        &lt;version&gt;5.9.3&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>在 src/main/test/java 目录下编写测试类，定义测试方法：</p>
<pre><code class="language-java">public class JdbcTest {
    /*
     * JDBC入门程序
     */
    @Test
    public void testUpdate() throws Exception {
        //1.注册驱动
        //两次shift提示
        Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);
        //2.获取数据库连接
        String url=&quot;jdbc:mysql://localhost:3306/web01&quot;;
        String username=&quot;root&quot;;
        String password=&quot;123456&quot;;
        Connection connection=DriverManager.getConnection(url,username,password);
        //3.获取SQL语句执行对象
        Statement statement=connection.createStatement();
        //4.执行SQL
        int i=statement.executeUpdate(&quot;update user set age=25 where id=1&quot;);//DML
        System.out.println(&quot;SQL语句执行完毕影响的记录数为：&quot;+i);
        //5.释放资源
        statement.close();
        connection.close();
    }
}
</code></pre>
<h2 id="查询数据"><strong>查询数据</strong></h2>
<p>ResultSet（结果集对象）：封装了DQL查询语句查询的结果。</p>
<ul>
<li>next()：将光标从当前位置（开始默认表头）向前移动一行，并判断当前行是否为有效行，返回值为boolean。
<ul>
<li>true：有效行，当前行有数据</li>
<li>false：无效行，当前行没有数据</li>
</ul>
</li>
<li>getXxx(…)：获取数据，可以根据列的编号获取，也可以根据列名获取（推荐）。</li>
</ul>
<pre><code class="language-java">@Test
    public void testSelect() throws Exception {
       String url=&quot;jdbc:mysql://localhost:3306/web01&quot;;
       String username=&quot;root&quot;;
       String password=&quot;123456&quot;;

       Connection conn=null;
       PreparedStatement stmt=null;
       ResultSet rs=null;


       try {
           Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);
           conn =DriverManager.getConnection(url,username,password);
           String sql=&quot;select id,username,password,name,age from user where username = ? and password = ?&quot;;
           //?是占位符
           stmt= conn.prepareStatement(sql);
           stmt.setString(1,&quot;daqiao&quot;);
           stmt.setString(2,&quot;123456&quot;);
           //封装查询返回的结果
           rs=stmt.executeQuery();
           while(rs.next()) {
               User user = new User(
                       rs.getInt(&quot;id&quot;),
                       rs.getString(&quot;username&quot;),
                       rs.getString(&quot;password&quot;),
                       rs.getString(&quot;name&quot;),
                       rs.getInt(&quot;age&quot;)
               );
               System.out.println(user);//使用lombok的@Data自动生成的toString方法
           }
       } catch (Exception e) {
           e.printStackTrace();
       } finally {
           try {
               if(rs!=null) rs.close();
               if(stmt!=null) stmt.close();
               if(conn!=null) conn.close();
           } catch (SQLException e) {
               e.printStackTrace();
           }
       }
    }
</code></pre>
<h2 id="预编译sql"><strong>预编译SQL</strong></h2>
<p>SQL注入：通过控制输入来修改事先定义好的SQL语句，以达到执行代码对服务器进行攻击的方法。<br>
在cmd窗口运行jar包：</p>
<pre><code class="language-cmd">java -jar sql_Injection_demo-0.0.1-SNAPSHOT.jar
</code></pre>
<pre><code class="language-sql">SELECT * FROM user WHERE username = 'shfhsjfhja' AND password = '' or '1' = '1 '
</code></pre>
<p><img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250530213135.png" alt="" loading="lazy"><br>
而通过预编译SQL（select * from user where username = ? and password = ?），就可以直接解决上述SQL注入的问题且性能更高。<br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250530213458.png" alt="" loading="lazy"></p>
<h1 id="mybatis"><strong>MyBatis</strong></h1>
<ul>
<li>MyBatis是一款优秀的 持久层 框架，用于简化JDBC的开发。</li>
<li>MyBatis本是 Apache的一个开源项目iBatis，2010年这个项目由apache迁移到了google code，并且改名为MyBatis 。2013年11月迁移到Github。</li>
<li>官网：https://mybatis.net.cn/<br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250530215917.png" alt="" loading="lazy"></li>
</ul>
<h2 id="入门程序-2"><strong>入门程序</strong></h2>
<ol>
<li>创建工程<br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250610212114.png" alt="" loading="lazy"><br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250610212128.png" alt="" loading="lazy"></li>
<li>数据准备</li>
</ol>
<pre><code class="language-java">@Data
@AllArgsConstructor
@NoArgsConstructor
public class User {
    private Integer id;
    private String username;
    private String password;
    private String name;
    private Integer age;
}
</code></pre>
<p>数据库创建同JDBC。<br>
3. 配置属性文件<br>
在 application.properties 中配置数据库的连接信息。</p>
<pre><code class="language-xml">spring.application.name=springboot-mybatis-quickstart

# 配置数据库的连接信息（字符编码在settings中的file encoding中配置）
#数据库访问的url地址
spring.datasource.url=jdbc:mysql://localhost:3306/web01
#数据库驱动类类名
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
#访问数据库-用户名
spring.datasource.username=root
#访问数据库-密码
spring.datasource.password=123456
</code></pre>
<ol start="4">
<li>创建接口</li>
</ol>
<pre><code class="language-java">@Mapper//应用程序在运行时，会自动的为该接口创建一个实现类对象（代理对象），并且会自动将该实现类存入IOC容器-bean
public interface UserMapper {
    /*查询所有用户*/
    @Select(&quot;select * from user&quot;)//自动将查询的结果封装给返回值
    public List&lt;User&gt; findAll();
}
</code></pre>
<ol start="5">
<li>单元测试<br>
在创建出来的SpringBoot工程中，在src下的test目录下，已经自动帮我们创建好了测试类(名字要与启动类相同) ，并且在测试类上已经添加了注解 @SpringBootTest，代表该测试类已经与SpringBoot整合。<br>
该测试类在运行时，会自动通过引导类加载Spring的环境（IOC容器）。我们要测试那个bean对象，就可以直接通过@Autowired注解直接将其注入进行，然后就可以测试了。</li>
</ol>
<pre><code class="language-java">@SpringBootTest//SpringBoot单元测试的注解-当前测试类中的方法运行时，会启动springboot项目-IOC容器
class SpringbootMybatisQuickstartApplicationTests {

    @Autowired
    private UserMapper userMapper;
    @Test
    public void testFindAll() {
        List&lt;User&gt; users = userMapper.findAll();
        users.forEach(System.out::println);
    }
}
</code></pre>
<h2 id="辅助配置"><strong>辅助配置</strong></h2>
<p>默认我们在UserMapper接口上加的 @Select 注解中编写SQL语句是没有提示的。 如果想让idea给我们提示对应的SQL语句，我们需要在IDEA中配置与MySQL数据库的链接。<br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250610214801.png" alt="" loading="lazy"><br>
配置完成之后，发现SQL语句中的关键字有提示了，但Idea和数据库没有建立连接，不识别表信息。需要在Idea界面右侧配置数据库连接。<br>
除此之外，在File----&gt;Setting---&gt;Languages &amp; Frameworks---&gt;SQL Dialects中，选择对应的数据库，如MySQL，之后点击保存即可。<br>
默认情况下，在Mybatis中，SQL语句执行时，我们并看不到SQL语句的执行日志。 在application.properties加入如下配置，即可查看日志：</p>
<pre><code class="language-xml">#mybatis的配置
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre>
<h2 id="jdbc-vs-mybatis"><strong>JDBC VS  Mybatis</strong></h2>
<p>JDBC程序的缺点：</p>
<ul>
<li>url、username、password 等相关参数全部硬编码在java代码中。</li>
<li>查询结果的解析、封装比较繁琐。</li>
<li>每一次操作数据库之前，先获取连接，操作完毕之后，关闭连接。 频繁的获取连接、释放连接造成资源浪费。</li>
</ul>
<p>分析了JDBC的缺点之后，我们再来看一下在mybatis中，是如何解决这些问题的：</p>
<ul>
<li>数据库连接四要素(驱动、链接、用户名、密码)，都配置在springboot默认的配置文件 application.properties中</li>
<li>查询结果的解析及封装，由mybatis自动完成映射封装，我们无需关注</li>
<li>在mybatis中使用了数据库连接池技术（类似线程池），从而避免了频繁的创建连接、销毁连接而带来的资源浪费。</li>
</ul>
<h2 id="数据库连接池"><strong>数据库连接池</strong></h2>
<ul>
<li>数据库连接池是个容器，负责分配、管理数据库连接(Connection)。</li>
<li>程序在启动时，会在数据库连接池(容器)中，创建一定数量的Connection对象。</li>
<li>释放空闲时间超过最大空闲时间的连接，来避免因为没有释放连接而引起的数据库连接遗漏。- 客户端获取到Connection对象了，但是Connection对象并没有去访问数据库(处于空闲)，数据库连接池发现Connection对象的空闲时间 &gt; 连接池中预设的最大空闲时间，此时数据库连接池就会自动释放掉这个连接对象。</li>
</ul>
<p>数据库连接池的好处：</p>
<ul>
<li>资源重用</li>
<li>提升系统响应速度</li>
<li>避免数据库连接遗漏</li>
</ul>
<p>官方(sun)提供了数据库连接池标准（javax.sql.DataSource接口）。</p>
<pre><code class="language-java">public Connection getConnection() throws SQLException;
</code></pre>
<p>常见的数据库连接池：C3P0 、DBCP 、Druid 、Hikari (springboot默认)</p>
<h3 id="hikari追光者"><strong>Hikari（追光者）</strong></h3>
<p><img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250610220730.png" alt="" loading="lazy"><br>
<img src="https://cdn.jsdelivr.net/gh/yyss1014/blog_img@main/20250610221159.png" alt="" loading="lazy"></p>
<h3 id="druid德鲁伊"><strong>Druid（德鲁伊）</strong></h3>
<ul>
<li>Druid连接池是阿里巴巴开源的数据库连接池项目</li>
<li>功能强大，性能优秀，是Java语言最好的数据库连接池之一</li>
</ul>
<p>参考官方地址：https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter<br>
切换连接池：<br>
在pom.xml文件中引入依赖：</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;!-- Druid连接池依赖 --&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;1.2.19&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>在application.properties中引入数据库连接配置：</p>
<pre><code class="language-properties">spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
spring.datasource.druid.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.druid.url=jdbc:mysql://localhost:3306/web
spring.datasource.druid.username=root
spring.datasource.druid.password=1234
</code></pre>
<h2 id="增删改操作"><strong>增删改操作</strong></h2>
<h3 id="删除"><strong>删除</strong></h3>
<pre><code class="language-java">/**
 * 根据id删除
 */
@Delete(&quot;delete from user where id = #{id}&quot;)
public void deleteById(Integer id);
</code></pre>
<p>DML语句执行完毕，是有返回值的，我们可以为Mapper接口方法定义返回值来接收，如下：</p>
<pre><code class="language-java">/**
 * 根据id删除
 */
@Delete(&quot;delete from user where id = #{id}&quot;)
public Integer deleteById(Integer id);
</code></pre>
<p>Integer类型的返回值，表示DML语句执行完毕影响的记录数。<br>
Mybatis的提供的符号，有两个，一个是 #{...}，另一个是 ${...}，区别如下：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
<th>场景</th>
</tr>
</thead>
<tbody>
<tr>
<td>#{…}</td>
<td>占位符。执行时，会将#{…}替换为?，生成预编译SQL</td>
<td>参数值传递</td>
</tr>
<tr>
<td>${…}</td>
<td>拼接符。直接将参数拼接在SQL语句中，存在SQL注入问题</td>
<td>表名、字段名动态设置时使用</td>
</tr>
</tbody>
</table>
<h3 id="新增"><strong>新增</strong></h3>
<pre><code class="language-java">@Insert(&quot;insert into user(username,password,name,age) values (#{username},#{password},#{name},#{age})&quot;)
    public void insert(User user);
</code></pre>
<p>在测试类中添加测试方法，代码如下：</p>
<pre><code class="language-java">@Test
    public void testInsert() {
        User user = new User(null,&quot;gaoyuanyuan&quot;,&quot;666888&quot;,&quot;高圆圆&quot;,18);
        userMapper.insert(user);
    }
</code></pre>
<h3 id="更新"><strong>更新</strong></h3>
<pre><code class="language-java">@Update(&quot;update user set username=#{username},password=#{password},name=#{name},age=#{age} where id=#{id}&quot;)
    public void update(User user);
</code></pre>
<pre><code class="language-java"> @Test
    public void testUpdate() {
        User user = new User(1,&quot;zhouyu&quot;,&quot;666888&quot;,&quot;周瑜&quot;,20);
        userMapper.update(user);
    }
</code></pre>
<h3 id="查询"><strong>查询</strong></h3>
<p>定义的接口方法，在java文件编译为字节码文件后，形参名称不会保留，sql语句的占位符无法识别。</p>
<pre><code class="language-java">/**
 * 根据用户名和密码查询用户信息
 */
@Select(&quot;select * from user where username = #{username} and password = #{password}&quot;)
public User findByUsernameAndPassword(@Param(&quot;username&quot;) String username, @Param(&quot;password&quot;) String password);
</code></pre>
<p>@param注解的作用是为接口的方法形参起名字的。</p>
<ul>
<li>说明：基于官方骨架创建的springboot项目中，接口编译时会保留方法形参名，@Param注解可以省略 (#{形参名})。</li>
</ul>
<pre><code class="language-xml">&lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.4.6&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
</code></pre>
<pre><code class="language-java">/**
 * 根据用户名和密码查询用户信息
 */
@Select(&quot;select * from user where username = #{username} and password = #{password}&quot;)
public User findByUsernameAndPassword(String username, String password);
</code></pre>
<p>究其原因，sprintboot官方骨架的父工程有个maven项目编译插件，有一个parameters为true的配置项。</p>
<pre><code class="language-xml">&lt;plugin&gt;
          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
          &lt;configuration&gt;
            &lt;parameters&gt;true&lt;/parameters&gt;
          &lt;/configuration&gt;
        &lt;/plugin&gt;
</code></pre>
<h2 id="xml映射配置"><strong>XML映射配置</strong></h2>
<p>使用Mybatis的注解方式，主要是来完成一些简单的增删改查功能。如果需要实现复杂的SQL功能，建议使用XML来配置映射语句，也就是将SQL语句写在XML配置文件中。语法见官网。</p>
<ol>
<li>XML映射文件的名称与Mapper接口名称一致，并且将XML映射文件和Mapper接口放置在相同包下（同包同名）（在resource文件夹下创建，路径用/分隔）</li>
<li>XML映射文件的namespace属性为Mapper接口全限定名一致</li>
<li>XML映射文件中sql语句的id与Mapper接口中的方法名一致，并保持返回单条记录类型一致。</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.ys.mapper.UserMapper&quot;&gt;
&lt;!--    resultType 属性的值，与查询返回的单条记录封装的类型一致--&gt;
    &lt;select id=&quot;findAll&quot; resultType=&quot;com.ys.pojo.User&quot;&gt;
        select * from user
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<pre><code class="language-java">public List&lt;User&gt; findAll();
</code></pre>
<p>一个接口方法对应的SQL语句，要么使用注解配置，要么使用XML配置，切不可同时配置。</p>
<h3 id="辅助配置-2"><strong>辅助配置</strong></h3>
<p>java和resource编译后都会放在target的class目录下，更改xml位置为resource/mapper/UserMapper.xml后，在application.properties属性文件可以修改如下：</p>
<pre><code class="language-properties">#指定xml映射配置文件的位置
mybatis.mapper-locations=classpath:mapper/*.xml
</code></pre>
<h3 id="mybatisx的使用"><strong>MybatisX的使用</strong></h3>
<p>MybatisX是一款基于IDEA的快速开发Mybatis的插件，为效率而生，可以通过MybatisX快速定位。</p>
<h1 id="springboot配置文件"><strong>SpringBoot配置文件</strong></h1>
<p>前面我们一直使用springboot项目创建完毕后自带的application.properties进行属性的配置，而如果在项目中，我们需要配置大量的属性，采用properties配置文件这种 key=value 的配置形式，就会显得配置文件的层级结构不清晰，也比较臃肿。</p>
<ul>
<li>SpringBoot项目提供了多种属性配置方式（properties、yaml、yml）。</li>
</ul>
<h2 id="yml配置文件"><strong>yml配置文件</strong></h2>
<p>yml格式配置文件名字为：application.yaml , application.yml 这两个配置文件的后缀名虽然不一样，但是里面配置的内容形式都是一模一样的。基本语法如下：</p>
<ul>
<li>大小写敏感</li>
<li>数值前边必须有空格，作为分隔符</li>
<li>使用缩进表示层级关系，缩进时，不允许使用Tab键，只能用空格（idea中会自动将Tab转换为空格）</li>
<li>缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</li>
<li>#表示注释，从这个字符一直到行尾，都会被解析器忽略</li>
</ul>
<p>yml文件中常见的数据格式：</p>
<ul>
<li>对象/Map集合</li>
</ul>
<pre><code class="language-yaml">user:
  name: zhangsan
  age: 18
  password: 123456
</code></pre>
<ul>
<li>数组/List/Set集合</li>
</ul>
<pre><code class="language-yaml">hobby: 
  - java
  - game
  - sport
</code></pre>
<p>在yml格式的配置文件中，如果配置项的值是以 0 开头的，值需要使用 '' 引起来，因为以0开头在yml中表示8进制的数据。(&quot;0123&quot;)</p>
<h2 id="案例"><strong>案例</strong></h2>
<p>我们修改下之前案例中使用的配置文件，变更为application.yml配置方式：</p>
<pre><code class="language-yaml">spring:
  application:
    name: springboot-mybatis-quickstart
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    url: jdbc:mysql://localhost:3306/web01
    driver-class-name: com.mysql.cj.jdbc.Driver
    username: root
    password: 123456
mybatis:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  mapper-locations: classpath:mapper/*.xml
</code></pre>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#jdbc"><strong>JDBC</strong></a>
<ul>
<li><a href="#%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F"><strong>入门程序</strong></a></li>
<li><a href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><strong>查询数据</strong></a></li>
<li><a href="#%E9%A2%84%E7%BC%96%E8%AF%91sql"><strong>预编译SQL</strong></a></li>
</ul>
</li>
<li><a href="#mybatis"><strong>MyBatis</strong></a>
<ul>
<li><a href="#%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F-2"><strong>入门程序</strong></a></li>
<li><a href="#%E8%BE%85%E5%8A%A9%E9%85%8D%E7%BD%AE"><strong>辅助配置</strong></a></li>
<li><a href="#jdbc-vs-mybatis"><strong>JDBC VS  Mybatis</strong></a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0"><strong>数据库连接池</strong></a>
<ul>
<li><a href="#hikari%E8%BF%BD%E5%85%89%E8%80%85"><strong>Hikari（追光者）</strong></a></li>
<li><a href="#druid%E5%BE%B7%E9%B2%81%E4%BC%8A"><strong>Druid（德鲁伊）</strong></a></li>
</ul>
</li>
<li><a href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%93%8D%E4%BD%9C"><strong>增删改操作</strong></a>
<ul>
<li><a href="#%E5%88%A0%E9%99%A4"><strong>删除</strong></a></li>
<li><a href="#%E6%96%B0%E5%A2%9E"><strong>新增</strong></a></li>
<li><a href="#%E6%9B%B4%E6%96%B0"><strong>更新</strong></a></li>
<li><a href="#%E6%9F%A5%E8%AF%A2"><strong>查询</strong></a></li>
</ul>
</li>
<li><a href="#xml%E6%98%A0%E5%B0%84%E9%85%8D%E7%BD%AE"><strong>XML映射配置</strong></a>
<ul>
<li><a href="#%E8%BE%85%E5%8A%A9%E9%85%8D%E7%BD%AE-2"><strong>辅助配置</strong></a></li>
<li><a href="#mybatisx%E7%9A%84%E4%BD%BF%E7%94%A8"><strong>MybatisX的使用</strong></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#springboot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><strong>SpringBoot配置文件</strong></a>
<ul>
<li><a href="#yml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><strong>yml配置文件</strong></a></li>
<li><a href="#%E6%A1%88%E4%BE%8B"><strong>案例</strong></a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://yyss1014.github.io/post/sql-yu-ju/">
              <h3 class="post-title">
                SQL语句
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://yyss1014.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
